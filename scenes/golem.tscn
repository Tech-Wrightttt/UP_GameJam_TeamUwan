[gd_scene load_steps=66 format=3 uid="uid://cgwwfpi15kv6j"]

[ext_resource type="Script" uid="uid://cloe7k2xuyjrg" path="res://scripts/golem.gd" id="1_lfkcr"]
[ext_resource type="PackedScene" uid="uid://dvosiu6dgulgm" path="res://scenes/golem_projectile.tscn" id="2_hayyu"]
[ext_resource type="Texture2D" uid="uid://4rl0ah4n314p" path="res://bosses/BOSS_MechaStoneGolem/character/Character_sheet.png" id="2_vl4ji"]
[ext_resource type="Script" uid="uid://dws5tm7gw0mof" path="res://scripts/health_component.gd" id="3_hayyu"]
[ext_resource type="Script" uid="uid://coixxx3q8g6ad" path="res://scripts/finite_state_machine.gd" id="4_7qrc8"]
[ext_resource type="Script" uid="uid://dayy24vnl0gug" path="res://scripts/idle.gd" id="5_7rhl2"]
[ext_resource type="Script" uid="uid://ekij007wse3l" path="res://scripts/follow.gd" id="6_hf0py"]
[ext_resource type="Script" uid="uid://bq6my177xprct" path="res://scripts/death.gd" id="8_mhixx"]
[ext_resource type="Script" uid="uid://bcdlykuwiejwc" path="res://scripts/attack_golem.gd" id="8_vl4ji"]
[ext_resource type="Script" uid="uid://ccifkr113poi5" path="res://scripts/hurt_component.gd" id="9_0vgwy"]
[ext_resource type="Script" uid="uid://dcniktsrdfc32" path="res://scripts/hitbox_component.gd" id="10_552d6"]
[ext_resource type="PackedScene" uid="uid://cgwgq60bg2o1i" path="res://scenes/health_bar.tscn" id="11_ovbf4"]

[sub_resource type="AtlasTexture" id="AtlasTexture_7yvuq"]
atlas = ExtResource("2_vl4ji")
region = Rect2(0, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_kbwqp"]
atlas = ExtResource("2_vl4ji")
region = Rect2(100, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_rt8k7"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_s5wak"]
atlas = ExtResource("2_vl4ji")
region = Rect2(300, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_8p4rs"]
atlas = ExtResource("2_vl4ji")
region = Rect2(400, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_pe5xp"]
atlas = ExtResource("2_vl4ji")
region = Rect2(500, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_6hrfy"]
atlas = ExtResource("2_vl4ji")
region = Rect2(600, 400, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_xkbm8"]
atlas = ExtResource("2_vl4ji")
region = Rect2(0, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_2jqg1"]
atlas = ExtResource("2_vl4ji")
region = Rect2(100, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_l4nl7"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_3oi56"]
atlas = ExtResource("2_vl4ji")
region = Rect2(300, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_o2m04"]
atlas = ExtResource("2_vl4ji")
region = Rect2(400, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_mu4na"]
atlas = ExtResource("2_vl4ji")
region = Rect2(500, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_o8duh"]
atlas = ExtResource("2_vl4ji")
region = Rect2(600, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_spqho"]
atlas = ExtResource("2_vl4ji")
region = Rect2(700, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_kjtnc"]
atlas = ExtResource("2_vl4ji")
region = Rect2(800, 200, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_8xykf"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 100, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_87h70"]
atlas = ExtResource("2_vl4ji")
region = Rect2(0, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_sn3cj"]
atlas = ExtResource("2_vl4ji")
region = Rect2(100, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_oifhj"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_q6fpe"]
atlas = ExtResource("2_vl4ji")
region = Rect2(300, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_inmct"]
atlas = ExtResource("2_vl4ji")
region = Rect2(400, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_wumnt"]
atlas = ExtResource("2_vl4ji")
region = Rect2(500, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_ksuhv"]
atlas = ExtResource("2_vl4ji")
region = Rect2(600, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_aoj3p"]
atlas = ExtResource("2_vl4ji")
region = Rect2(700, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_vmlld"]
atlas = ExtResource("2_vl4ji")
region = Rect2(800, 700, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_apwpw"]
atlas = ExtResource("2_vl4ji")
region = Rect2(0, 800, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_0pyxv"]
atlas = ExtResource("2_vl4ji")
region = Rect2(100, 800, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_8mbgv"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 800, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_qeqdb"]
atlas = ExtResource("2_vl4ji")
region = Rect2(300, 800, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_fp1h8"]
atlas = ExtResource("2_vl4ji")
region = Rect2(0, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_ak4l4"]
atlas = ExtResource("2_vl4ji")
region = Rect2(100, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_jxa1y"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_grfy2"]
atlas = ExtResource("2_vl4ji")
region = Rect2(300, 0, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_rnbxh"]
atlas = ExtResource("2_vl4ji")
region = Rect2(0, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_m3xxr"]
atlas = ExtResource("2_vl4ji")
region = Rect2(100, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_hh1co"]
atlas = ExtResource("2_vl4ji")
region = Rect2(200, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_llbvh"]
atlas = ExtResource("2_vl4ji")
region = Rect2(300, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_gsbq2"]
atlas = ExtResource("2_vl4ji")
region = Rect2(400, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_13t5j"]
atlas = ExtResource("2_vl4ji")
region = Rect2(500, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_ul0x2"]
atlas = ExtResource("2_vl4ji")
region = Rect2(600, 300, 100, 100)

[sub_resource type="AtlasTexture" id="AtlasTexture_ylsbe"]
atlas = ExtResource("2_vl4ji")
region = Rect2(700, 300, 100, 100)

[sub_resource type="SpriteFrames" id="SpriteFrames_qhl17"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7yvuq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kbwqp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rt8k7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s5wak")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8p4rs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pe5xp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6hrfy")
}],
"loop": false,
"name": &"attack1",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xkbm8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2jqg1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l4nl7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3oi56")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o2m04")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mu4na")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o8duh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_spqho")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kjtnc")
}],
"loop": false,
"name": &"attack2",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_8xykf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_87h70")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sn3cj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oifhj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q6fpe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_inmct")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wumnt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ksuhv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aoj3p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vmlld")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_apwpw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0pyxv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8mbgv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qeqdb")
}],
"loop": false,
"name": &"death",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fp1h8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ak4l4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jxa1y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_grfy2")
}],
"loop": true,
"name": &"idle",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rnbxh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m3xxr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hh1co")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_llbvh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gsbq2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_13t5j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ul0x2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ylsbe")
}],
"loop": false,
"name": &"skill",
"speed": 8.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_lfkcr"]
radius = 45.90449

[sub_resource type="Animation" id="Animation_0auj5"]
resource_name = "attack2"
length = 0.9
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.76666665),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"shoot"
}]
}

[sub_resource type="Animation" id="Animation_vl4ji"]
resource_name = "attack1"
length = 0.7
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Hitbox_Attack1")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.5, 0.6666667),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"activate"
}, {
"args": [],
"method": &"deactivate"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_8ybym"]
_data = {
&"attack1": SubResource("Animation_vl4ji"),
&"attack2": SubResource("Animation_0auj5")
}

[sub_resource type="Animation" id="Animation_mf48g"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_dvhn7"]
resource_name = "hurt"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.19999999, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0.3137255), Color(1, 1, 1, 1), Color(1, 1, 1, 0.3137255), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mf48g"]
_data = {
&"RESET": SubResource("Animation_mf48g"),
&"hurt": SubResource("Animation_dvhn7")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bxwgr"]
size = Vector2(464, 97)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_knqip"]
radius = 48.000004
height = 96.00001

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_lfkcr"]
radius = 18.140633
height = 86.23432

[node name="golem" type="CharacterBody2D" node_paths=PackedStringArray("effects_animation_player") groups=["enemy"]]
scale = Vector2(3, 3)
collision_layer = 2
script = ExtResource("1_lfkcr")
effects_animation_player = NodePath("EffectsAnimationPlayer")
bullet_node = ExtResource("2_hayyu")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_qhl17")
animation = &"attack2"
frame = 8
frame_progress = 1.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-2, -1)
shape = SubResource("CircleShape2D_lfkcr")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_8ybym")
}

[node name="EffectsAnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_mf48g")
}

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("3_hayyu")

[node name="PlayerDetection" type="Area2D" parent="."]
collision_layer = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerDetection"]
position = Vector2(182, -3.5)
shape = SubResource("RectangleShape2D_bxwgr")

[node name="FiniteStateMachine" type="Node2D" parent="."]
script = ExtResource("4_7qrc8")
initial_state = NodePath("idle")

[node name="idle" type="Node2D" parent="FiniteStateMachine"]
script = ExtResource("5_7rhl2")

[node name="follow" type="Node2D" parent="FiniteStateMachine"]
script = ExtResource("6_hf0py")
dist = 200

[node name="attack" type="Node2D" parent="FiniteStateMachine"]
script = ExtResource("8_vl4ji")
attack_animations = Array[String](["attack1", "attack2", "skill"])
attack_duration = 1.0
attack_cooldown = 1.5

[node name="death" type="Node2D" parent="FiniteStateMachine"]
script = ExtResource("8_mhixx")

[node name="debug" type="Label" parent="."]
offset_left = -28.0
offset_top = -88.0
offset_right = 39.0
offset_bottom = -23.0
text = "DEBUG"

[node name="Hurtbox" type="Area2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 16
script = ExtResource("9_0vgwy")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(0.33333334, -0.33333334)
shape = SubResource("CapsuleShape2D_knqip")

[node name="Hitbox_Attack1" type="Area2D" parent="." groups=["hitbox"]]
visible = false
collision_layer = 32
collision_mask = 20
script = ExtResource("10_552d6")

[node name="attack_up" type="CollisionShape2D" parent="Hitbox_Attack1"]
position = Vector2(39, -6.000001)
shape = SubResource("CapsuleShape2D_lfkcr")

[node name="WallRay" type="RayCast2D" parent="."]
position = Vector2(0, 7)
target_position = Vector2(42, 0)

[node name="FloorRay" type="RayCast2D" parent="."]

[node name="HealthBar" parent="." node_paths=PackedStringArray("health_component") instance=ExtResource("11_ovbf4")]
offset_top = -67.0
offset_bottom = -40.0
health_component = NodePath("../HealthComponent")

[node name="ProjectileSpawn" type="Marker2D" parent="."]
position = Vector2(46.000004, -18.333334)

[connection signal="body_entered" from="PlayerDetection" to="FiniteStateMachine/idle" method="_on_player_detection_body_entered"]
[connection signal="area_entered" from="Hurtbox" to="Hurtbox" method="_on_area_entered"]
